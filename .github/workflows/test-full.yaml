name: full CI
run-name: ${{ github.actor }} run Actions ðŸš€

on:
  push:
    branches:
      - main

jobs:
  docker:
    if: ${{ github.event.inputs.run-docker }}
    uses: mequq/.ci_template/.github/workflows/docker.yaml@refs/tags/v3.4.2
    with:
      debug: false
      registry: ${{ vars.REGISTERY_ADDRESS }}
    secrets:
      REGISTERY_USER: ${{ secrets.REGISTERY_USER }}
      REGISTERY_PASSWORD: ${{ secrets.REGISTERY_PASSWORD }}
  argocd:
    if: ${{ github.event.inputs.run-argocd }}
    uses: mequq/.ci_template/.github/workflows/argocd.yaml@refs/tags/v1.0
    needs: docker
    with:
      debug: false
      registry: ${{ vars.REGISTERY_ADDRESS }}
    secrets:
      ARGOCD_GIT_TOKEN: ${{ secrets.ARGOCD_GIT_TOKEN }}
  